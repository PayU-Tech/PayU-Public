language: java
jdk:
    - oraclejdk8

install: true
script:
script:
    - export IS_RELEASE=`git log -1 --pretty=%s | grep "[maven-release-plugin] prepare release"`
    -
        if [ -z "$TRAVIS_TAG" -a -z "$IS_RELEASE" ]; then
            if [ "$TRAVIS_PULL_REQUEST" = "false" -a "$TRAVIS_BRANCH" = "master" ]; then
                $_MVN deploy;
            else
                $_MVN install;
            fi
        fi

env:
    global:
        - _MVN='mvn -B -V -e -s .travis.xml -Pnexus'
        - secure: "oZ7CF7EHowAxqJ63RRUR8pLCzhjaYXWCjqB69SdpkuFVEFfxRVhrH5GbpdJ/5IcSnZwmxdE7Vpfmi+MNwuzzxSxu7LgMiH+xKDy3juCHuEWBhMr1WAFvlgZZSiqmYsVXBkwCuuMZx+ZzamM4zZx+TaE6GJPokfsIKKj1tQxvRTU="
        - secure: "VXUlIcIvgjzcsgDUnJfPFCd+dw2pvUOIAJguzCP8PDGM/lowf/3S3wh3+aYM1LNgA6GZKnrVCtKThKIMByidSpQjHzH/MqRjzKu/sJ2wK0uuR+F8hpXHO7YKRzReTEkvUIuErKycbxK0dgvW8i8/kCe4xw4Sz9gl+SOiW07xcVU="
